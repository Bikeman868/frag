(()=>{var e={627:()=>{window.frag.Animation=function(e){const t={stopAfter:0},n=e||{};return n.__private=t,n.execute=function(e,r){if(void 0!==t.stopAfter&&(t.stopAt=e+t.stopAfter,delete t.stopAfter),!(void 0!==t.stopAt&&e>=t.stopAt)){if(t.sequence){let r=t.sequence[t.sequenceIndex];t.nextStepTick?e>=t.nextStepTick&&(r.stop&&r.stop(n,e),t.sequenceIndex++,t.sequenceIndex===t.sequence.length?t.autoRestart?(t.sequenceIndex=0,r=t.sequence[t.sequenceIndex],r.start&&r.start(n,e),t.nextStepTick=e+(r.duration||100)):t.stopAt=e:(r=t.sequence[t.sequenceIndex],r.start&&r.start(n,e),t.nextStepTick=e+(r.duration||100))):(t.nextStepTick=e+(r.duration||100),r.start&&r.start(n,e)),t.action=r.action,n.nextGameTick=e+(r.interval||5)}else void 0!==t.frameRepeat?n.nextFrameTick=r+t.frameRepeat:void 0!==t.tickRepeat&&(n.nextGameTick=e+t.tickRepeat);t.action&&t.action(n,e,r)}},n.sequence=function(e,r){return t.sequence=e,t.sequenceIndex=0,t.autoRestart=r,n},n.start=function(){return delete t.nextStepTick,delete t.stopAfter,delete t.stopAt,n},n.stop=function(){return t.stopAfter=0,n},n.repeatTicks=function(e,r){return delete t.autoRestart,delete t.frameRepeat,delete t.sequence,t.tickRepeat=r||e.interval||20,t.action=e,n},n.repeatFrames=function(e,r){return delete t.autoRestart,delete t.tickRepeat,delete t.sequence,t.frameRepeat=r||1,t.action=e,n},n.stopAfter=function(e){return t.stopAfter=e,delete t.stopAt,n},window.frag.addAnimation(n),n.dispose=function(){window.frag.removeAnimation(n)},n}},600:()=>{window.frag.KeyframeAnimationAction=function(){const e={startTick:void 0,currentFrame:void 0,keyframes:{}},t={__private:e,interval:10,frames:100,start:function(n,r){return t.duration=t.interval*t.frames,e.startTick=r,e.currentFrame=-1,t},action:function(n,r){let a=Math.floor((r-e.startTick)/t.interval);for(;e.currentFrame<a;){e.currentFrame++;const t=e.keyframes[e.currentFrame];if(t)for(let n=0;n<t.length;n++)t[n].action(e.currentFrame,t[n].data,r)}return t},set:function(e,n){return t.interval=e,t.frames=n||t.frames,t},add:function(n,r,a){let o=e.keyframes[n];return o||(o=[],e.keyframes[n]=o),o.push({action:r,data:a}),t}};return t}},363:()=>{window.frag.ModelAnimation=function(){const e={loop:!1,interval:10,frames:50,channelGraphs:[],name:""},t={__private:e,getChannelGraphs:function(){return e.channelGraphs},name:function(n){return e.name=n,t},getName:function(){return e.name},loop:function(n){return e.loop=n,t},getLoop:function(){return e.loop},interval:function(n){return e.interval=n,t},getInterval:function(){return e.interval},frames:function(n){return e.frames=n,t},getFrames:function(){return e.frames}},n=function(t){const n=[];let r;n.length=e.frames;let a=0;for(let o=0;o<e.frames;o++){const e=t[o];if(void 0!==e){if(r=e.value,"linear"===e.transition){const e=n[a],t=(r-e)/(o-a);for(let r=a+1;r<o;r++)n[r]=e+(r-a)*t}a=o}n[o]=r}return n};return t.addChannel=function(t){e.channelGraphs.push({pattern:t.pattern,channel:t.channel,frameValues:n(t.keyframes)})},t}},23:()=>{window.frag.ObjectAnimationState=function(){const e={is3d:!0,matrix:null,translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotateX:0,rotateY:0,rotateZ:0};return{__private:e,getMatrix:function(){if(!e.matrix){let t;t=e.is3d?window.frag.Transform().translateXYZ(e.translateX,e.translateY,e.translateZ).rotateXYZ(e.rotateX,e.rotateY,e.rotateZ).scaleXYZ(e.scaleX,e.scaleY,e.scaleZ):window.frag.Transform2D().translateXY(e.translateX,e.translateY).rotate(e.rotateZ).scaleXY(e.scaleX,e.scaleY),e.matrix=t.getMatrix()}return e.matrix},getUpdateFunction:function(t){switch(t){case"translate-x":return e.is3d?function(t){e.translateX=t,e.matrix&&(e.matrix[12]=t)}:function(t){e.translateX=t,e.matrix&&(e.matrix[6]=t)};case"translate-y":return e.is3d?function(t){e.translateY=t,e.matrix&&(e.matrix[13]=t)}:function(t){e.translateY=t,e.matrix&&(e.matrix[7]=t)};case"translate-z":if(e.is3d)return function(t){e.translateY=t,e.matrix&&(e.matrix[14]=t)};case"scale-x":return function(t){e.scaleX=t,e.matrix=null};case"scale-y":return function(t){e.scaleY=t,e.matrix=null};case"scale-z":if(e.is3d)return function(t){e.scaleZ=t,e.matrix=null};case"rotate-x":if(e.is3d)return function(t){e.rotateX=t,e.matrix=null};case"rotate-y":if(e.is3d)return function(t){e.rotateY=t,e.matrix=null};case"rotate-z":return function(t){e.rotateZ=t,e.matrix=null}}return console.warn("Unsupported animation channel "+t),function(){}}}}},890:()=>{window.frag.SceneObjectAnimation=function(e,t){const n=e.modelAnimation,r=e.childAnimations,a=[];for(let e=0;e<r.length;e++){const n=r[e],o=n.model.getName();if(animationState=t[o],animationState){const e=n.graph,t=animationState.getUpdateFunction(e.channel);a.push((function(n){t(e.frameValues[n])}))}}const o=function(e){for(let t=0;t<a.length;t++)a[t](e)},i=window.frag.KeyframeAnimationAction().set(n.getInterval(),n.getFrames());for(let e=0;e<n.getFrames();e++)i.add(e,o);return window.frag.Animation().sequence([i],n.getLoop())}},889:()=>{window.frag.ValueAnimationAction=function(){const e={},t={__private:e,duration:30,interval:5,setDuration:function(e){return t.duration=e,t},setInterval:function(e){return t.interval=e,t},onStart:function(n){return e.onStart=n,t},onStop:function(n){return e.onStop=n,t},onStep:function(n){return e.onStep=n,t},start:function(n,r){return e.startTick=r,e.endTick=r+t.duraction,e.onStart&&e.onStart(n,t,r),t},action:function(n,r){if(e.onStep){const a=(r-e.startTick)/t.duration;e.onStep(n,a,t,r)}return t},stop:function(n,r){return e.onStop&&e.onStop(n,t,r),t}};return t}},14:()=>{window.frag.OrthographicCamera=function(){const e={x:0,y:0,z:-200,fov:35*Math.PI/180,zNear:-100,zFar:100,xScale:100,aspectRatio:1},t={__private:e,worldToClipTransform:window.frag.Transform()},n=function(){const n=1/e.xScale,r=e.aspectRatio/e.xScale,a=2/(e.zFar-e.zNear),o=1-e.zFar*a;t.worldToClipTransform.identity().translateZ(o).scaleXYZ(n,r,a).translateXY(-e.x,-e.y)};return t.moveToXY=function(r,a){return e.x=r,e.y=a,n(),t},t.moveToXYZ=function(r,a,o){return e.x=r,e.y=a,e.z=o,n(),t},t.moveToZ=function(r){return e.z=r,n(),t},t.frustrum=function(r,a,o){return e.fov=r,e.zNear=a,e.zFar=o,n(),t},t.scaleX=function(r){return e.xScale=r,n(),t},t.setViewport=function(e){return e.viewport(0,0,e.canvas.clientWidth,e.canvas.clientHeight),e.canvas.width=e.canvas.clientWidth,e.canvas.height=e.canvas.clientHeight,t.adjustToViewport(e)},t.adjustToViewport=function(n){const r=n.drawingBufferWidth/n.drawingBufferHeight;if(r!=e.aspectRatio){e.aspectRatio=r;const n=t.worldToClipTransform.getMatrix();n[5]=n[0]*r,t.worldToClipTransform.setMatrix(n)}return t},t}},906:()=>{window.frag.PerspectiveCamera=function(){const e=window.frag,t={locationTransform:window.frag.Transform(),worldTransform:window.frag.Transform(),perspectiveTransform:window.frag.Transform(),x:0,y:0,z:-200,xRot:0,yRot:0,zRot:0,fov:45*Math.PI/180,zNear:-100,zFar:100,xScale:100,aspectRatio:1,transformChanged:!0},n={__private:t,worldToClipTransform:window.frag.Transform()};return t.computeCameraTransforms=function(){t.locationTransform.identity().translateXYZ(t.x,t.y,t.z).rotateXYZ(t.xRot,t.yRot,t.zRot),t.worldTransform.identity().rotateXYZ(-t.xRot,-t.yRot,-t.zRot).scaleXYZ(1/t.xScale,t.aspectRatio/t.xScale,2/(t.zFar-t.zNear)).translateXYZ(-t.x,-t.y,-t.z),t.transformChanged=!0},t.computePerspectiveTransform=function(){const e=-2*(t.zNear-t.z)/(t.zFar-t.zNear)-1;t.perspectiveTransform.setMatrix([1,0,0,0,0,1,0,0,0,0,1,.5,0,0,e,.7]),t.transformChanged=!0},t.computeTransform=function(){const r=e.Matrix.m4Xm4(t.perspectiveTransform.getMatrix(),t.worldTransform.getMatrix());n.worldToClipTransform.setMatrix(r)},t.computeCameraTransforms(),t.computePerspectiveTransform(),n.moveToXY=function(e,r){return t.x=e,t.y=r,t.computeCameraTransforms(),n},n.moveToZ=function(e){return t.z=e,t.computeCameraTransforms(),t.computePerspectiveTransform(),n},n.moveToXYZ=function(e,r,a){return t.x=e,t.y=r,t.z=a,t.computeCameraTransforms(),t.computePerspectiveTransform(),n},n.frustrum=function(e,r,a){return t.fov=e,t.zNear=r,t.zFar=a,t.computePerspectiveTransform(),n},n.scaleX=function(e){return t.xScale=e,t.computeCameraTransforms(),n},n.setViewport=function(e){return e.viewport(0,0,e.canvas.clientWidth,e.canvas.clientHeight),e.canvas.width=e.canvas.clientWidth,e.canvas.height=e.canvas.clientHeight,n.adjustToViewport(e)},n.adjustToViewport=function(e){const r=e.drawingBufferWidth/e.drawingBufferHeight;return r!=t.aspectRatio&&(t.aspectRatio=r,t.computeCameraTransforms()),t.transformChanged&&(t.computeTransform(),t.transformChanged=!1),n},n}},270:()=>{window.frag.UiCamera=function(){const e={aspectRatio:1},t={worldToClipTransform:window.frag.Transform2D().identity(),scaleX:function(n){var r=t.worldToClipTransform.getMatrix();return r[0]=1/n,t.worldToClipTransform.setMatrix(r),e.aspectRatio=-1,t},setViewport:function(e){return e.viewport(0,0,e.canvas.clientWidth,e.canvas.clientHeight),e.canvas.width=e.canvas.clientWidth,e.canvas.height=e.canvas.clientHeight,t.adjustToViewport(e)},adjustToViewport:function(n){const r=n.drawingBufferWidth/n.drawingBufferHeight;if(e.aspectRatio!=r){const n=t.worldToClipTransform.getMatrix();n[4]=n[0]*r,t.worldToClipTransform.setMatrix(n),e.aspectRatio=r}return t}};return t}},437:()=>{!function(){const e=window.frag,t=[],n=[],r=performance.now();let a=0,o=0,i=null;e.mainScene=function(t){return i&&i.dispose(),i=t,e},e.addScene=function(n){return t.push(n),e},e.removeScene=function(e){for(let n=0;n<t.length;n++)if(t[n]===e)return t.splice(n,1),!0;return!1},e.addAnimation=function(t){return n.push(t),e},e.removeAnimation=function(e){for(let t=0;t<n.length;t++)if(n[t]===e)return n.splice(t,1),!0;return!1};const s=function(){if(i){let s=e.gl;const c=performance.now();a=Math.floor((c-r)/window.frag.gameTickMs),o++,function(e,t){for(let r=0;r<n.length;r++){let a=n[r];void 0!==a.nextFrameTick?t>=a.nextFrameTick&&(a.nextFrameTick=t+10,a.execute(e,t)):null!=a.nextGameTick?e>=a.nextGameTick&&(a.nextGameTick=e+5,a.execute(e,t)):a.nextGameTick=e+5}}(a,o),s.bindFramebuffer(s.FRAMEBUFFER,null),i.setViewport(s),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),i.draw(s);for(let e=0;e<t.length;e++)t[e].adjustToViewport(s),t[e].draw(s);const u=performance.now();e.fps=1e3/(u-c)}setTimeout(s,e.renderInterval)};s()}()},904:()=>{window.frag=function(e){if(e.canvas=e.canvas||document.getElementById("scene"),!e.canvas)return console.error('No canvas with id of "scene" in the page'),null;const t=e.canvas.getContext("webgl");return t?(e.gl=t,t.clearColor(1,1,1,1),t.enable(t.CULL_FACE),t.enable(t.DEPTH_TEST),e.renderInterval=15,e.gameTickMs=10,e.debugMaterialLoader=!1,e.debugModelLoader=!1,e.debugShaderBuilder=!1,e.debugAnimations=!1,e.maxTextureUnits=e.gl.getParameter(e.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),e.nextTextureUnit=0,e.allocateTextureUnit=function(){const t=e.nextTextureUnit;return e.nextTextureUnit=(e.nextTextureUnit+1)%e.maxTextureUnits,t},e.init&&e.init(e),e):(alert("WebGL is not available"),null)}(window.frag||{})},607:()=>{window.frag.Observable=function(e){const t={notify:e,observers:[]};return{__private:t,subscribe:function(e){t.observers.push(e),t.notify(e)},unsubscribe:function(e){for(let n=0;n<t.observers.length;n++)if(t.observers[n]===e)return t.observers.splice(n,1),!0;return!1},notify:function(e){e=e||t.notify||function(e){e()};for(let n=0;n<t.observers.length;n++)e(t.observers[n])}}},window.frag.ObservableValue=function(){let e=null;const t=frag.Observable((t=>{t(e)}));return{get:function(){return e},set:function(n){e=n,t.notify()},subscribe:function(e){return t.subscribe(e)},unsubscribe:function(e){return t.unsubscribe(e)}}}},346:()=>{window.frag.Transform=function(e){const t=window.frag,n={matrix:e},r={__private:n,observableMatrix:window.frag.Observable((e=>{e(n.matrix)})),is3d:!0,clone:function(e){return window.frag.Transform(e||n.matrix)},getMatrix:function(){return n.matrix},setMatrix:function(e){return n.matrix=e,r.observableMatrix.notify(),r}};return n.transform=function(e){return n.matrix?r.setMatrix(t.Matrix.m4Xm4(n.matrix,e)):r.setMatrix(e)},r.identity=function(){return r.setMatrix([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},r.scale=function(e){return n.transform([e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1])},r.scaleX=function(e){return n.transform([e,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},r.scaleY=function(e){return n.transform([1,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1])},r.scaleZ=function(e){return n.transform([1,0,0,0,0,1,0,0,0,0,e,0,0,0,0,1])},r.scaleXY=function(e,t){return n.transform([e,0,0,0,0,t,0,0,0,0,1,0,0,0,0,1])},r.scaleXYZ=function(e,t,r){return n.transform([e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1])},r.translateX=function(e){return n.transform([1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1])},r.translateY=function(e){return n.transform([1,0,0,0,0,1,0,0,0,0,1,0,0,e,0,1])},r.translateZ=function(e){return n.transform([1,0,0,0,0,1,0,0,0,0,1,0,0,0,e,1])},r.translateXY=function(e,t){return n.transform([1,0,0,0,0,1,0,0,0,0,1,0,e,t,0,1])},r.translateXYZ=function(e,t,r){return n.transform([1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1])},r.rotateX=function(e){var t=Math.cos(e),r=Math.sin(e);return n.transform([1,0,0,0,0,t,r,0,0,-r,t,0,0,0,0,1])},r.rotateY=function(e){var t=Math.cos(e),r=Math.sin(e);return n.transform([t,0,-r,0,0,1,0,0,r,0,t,0,0,0,0,1])},r.rotateZ=function(e){var t=Math.cos(e),r=Math.sin(e);return n.transform([t,r,0,0,-r,t,0,0,0,0,1,0,0,0,0,1])},r.rotateXYZ=function(e,t,n){return e&&r.rotateX(e),t&&r.rotateY(t),n&&r.rotateZ(n),r},r.apply=function(e,t){return void 0!==t&&e.uniformMatrix4fv(t,!1,r.getMatrix()),r},r},window.tests=window.tests||{},window.tests.transform={check:function(e,t,n,r){const a=window.frag.Matrix.m4Xv4(t.getMatrix(),n);window.tests.expectArray(e,r,a)},t1:window.frag.Transform().identity(),t2:window.frag.Transform().scaleXYZ(2,3,4).translateXYZ(1,2,3),t3:window.frag.Transform().translateXYZ(1,2,3).scaleXYZ(2,3,4),run:function(e){e.check("Identity matrix",e.t1,[9,13,56,1],[9,13,56,1]),e.check("Scale+translate matrix",e.t2,[1,1,1,1],[4,9,16,1]),e.check("Translate+scale matrix",e.t3,[1,1,1,1],[3,5,7,1])}},window.tests.transform.run(window.tests.transform)},670:()=>{window.frag.Transform2D=function(e){const t=window.frag,n={matrix:e},r={__private:n,observableMatrix:window.frag.Observable((e=>{e(n.matrix)})),is3d:!1,clone:function(e){return window.frag.Transform2D(e||n.matrix)},getMatrix:function(){return n.matrix},setMatrix:function(e){return n.matrix=e,r.observableMatrix.notify(),r}};return n.transform=function(e){return n.matrix?r.setMatrix(t.Matrix.m3Xm3(n.matrix,e)):r.setMatrix(e)},r.identity=function(){return r.setMatrix([1,0,0,0,1,0,0,0,1])},r.scale=function(e){return n.transform([e,0,0,0,e,0,0,0,1])},r.scaleXY=function(e,t){return n.transform([e,0,0,0,t,0,0,0,1])},r.translateX=function(e){return n.transform([1,0,0,0,1,0,e,0,1])},r.translateY=function(e){return n.transform([1,0,0,0,1,0,0,e,1])},r.translateXY=function(e,t){return n.transform([1,0,0,0,1,0,e,t,1])},r.rotate=function(e){var t=Math.cos(e),r=Math.sin(e);return n.transform([t,-r,0,r,t,0,0,0,1])},r.apply=function(e,t){return void 0!==t&&e.uniformMatrix3fv(t,!1,r.getMatrix()),r},r}},583:()=>{window.frag.MaterialLoader=function(){const e=window.frag,t=new Uint32Array([287454020]),n=68===new Uint8Array(t.buffer)[0],r={},a={__private:r,littleEndian:n};return r.loadMipV1=function(t,r,a,o,i,s,c,u){const l=t.getUint8(r++),f=t.getUint32(r,n);e.debugMaterialLoader&&console.log("Color data at "+f),r+=4;const m=e.Texture().dataFormat(1==(1&l)?e.gl.RGBA:e.gl.RGB).fromArrayBuffer(s,a,o+f,c,u);if(i.setTexture("diffuse",m),2==(2&l)){const l=t.getUint32(r,n);e.debugMaterialLoader&&console.log("Surface data at "+l),r+=4;const f=e.Texture().dataFormat(e.gl.RGBA).fromArrayBuffer(s,a,o+l,c,u);i.setTexture("surface",f)}if(4==(4&l)){const l=t.getUint32(r,n);e.debugMaterialLoader&&console.log("Normal map at "+l),r+=4;const f=e.Texture().dataFormat(e.gl.RGB).fromArrayBuffer(s,a,o+l,c,u);i.setTexture("normalMap",f)}if(8==(8&l)){const l=t.getUint32(r,n);e.debugMaterialLoader&&console.log("PBR data at "+l),r+=4;const f=e.Texture().dataFormat(e.gl.RGBA).fromArrayBuffer(s,a,o+l,c,u);i.setTexture("pbr",f)}return r},r.loadMaterialV1=function(t,n,a,o,i){const s=n.getUint8(a++);var c="";for(let e=0;e<s;e++)c+=String.fromCharCode(n.getUint8(a++));const u=t.getMaterial(c);e.debugMaterialLoader&&(console.log(""),console.log("Loading "+c+" material textures"));var l,f=1<<n.getUint8(a++),m=f,g=0;do{l=n.getUint8(a++),e.debugMaterialLoader&&console.log("Loading MIP level "+l+" at "+f+" x "+m+" pixels"),l!==g&&console.error("Mip levels are wrong for "+c+" texture"),a=r.loadMipV1(n,a,o,i,u,l,f,m),g++,f>>>=1,m>>>=1}while(0!==l)},a.loadMaterialsFromBuffer=function(t,a){const o=new Uint8Array(a),i=new DataView(a,0,o.length),s=o[0],c=i.getUint16(2,n);var u=4;const l=u+c;if(e.debugMaterialLoader&&console.log("Material pack V"+s+" is "+o.length+" bytes with "+c+" header bytes"),1===s)for(var f=i.getUint16(u,n);0!==f;)r.loadMaterialV1(t,i,u+2,a,l),u+=f,f=i.getUint16(u,n);else console.error("Version "+s+" texture packs are not supported")},a.loadMaterialsFromUrl=function(e,t){var n=new XMLHttpRequest;n.responseType="arraybuffer",n.onreadystatechange=function(){4==this.readyState&&200==this.status&&a.loadMaterialsFromBuffer(e,this.response)},n.open("GET",t,!0),n.send()},a}()},96:()=>{window.frag.ModelLoader=function(){const e=window.frag,t=new Uint32Array([287454020]),n=68===new Uint8Array(t.buffer)[0],r={},a={__private:r,littleEndian:n};return r.loadMaterialV1=function(t,n,r){const a=t.header.getUint8(r++);var o="";for(let e=0;e<a;e++)o+=String.fromCharCode(t.header.getUint8(r++));const i=t.materialStore.getMaterial(o);return e.debugModelLoader&&console.log("Object["+n+"] is material "+o),i},r.loadMeshV1=function(t,r,a){const o=e.MeshData(),i=t.header.getUint16(a,n);a+=2,e.debugModelLoader&&console.log("Object["+r+"] is a mesh with "+i+" fragments");for(let r=0;r<i;r++){const i=t.header.getUint8(a),s=t.header.getUint8(a+1),c=t.header.getUint8(a+2),u=t.header.getUint8(a+3),l=t.header.getUint8(a+4),f=t.header.getUint8(a+5),m=t.header.getUint8(a+6),g=t.header.getUint32(a+7,n),d=t.header.getUint32(a+11,n);let h=t.header.getUint32(a+15,n)+t.dataOffset;a+=19;const p=1==(1&s),v=2==(2&s);let x=0;if(1===i?x=g/3:2===i?x=g/2:(3===i||4===i)&&(x=g-2),e.debugModelLoader){let e="  fragment["+r+"] has "+g+" verticies forming ";switch(1===i?e+=x+" triangles":2===i?e+=x/2+" rectangles":3===i?e+="a strip of "+x+"triangles":4===i&&(e+="a fan of "+x+" triangles"),p&&(e+=" indexed"),v||(e+=" in 2D"),c){case 1:e+=" with custom normals";break;case 2:e+=" with indexed normals";break;case 3:e+=" with triangle normals"}switch(u){case 1:e+=" with custom tangents";break;case 2:e+=" with indexed tangents";break;case 3:e+=" with triangle tangents";break;case 4:e+=" with single tangent"}switch(l){case 1:e+=" with bitangents"}switch(f){case 1:e+=" with custom uvs";break;case 2:e+=" with indexed uvs";break;case 3:e+=" with triangle uvs"}switch(m){case 1:e+=" with custom colors";break;case 2:e+=" with custom colors and transparency";break;case 3:e+=" with indexed colors";break;case 4:e+=" with indexed colors and transparency"}console.log(e)}const T=p?[]:void 0;if(p){indexArray=new Int16Array(t.data,h);for(let e=0;e<g;e++)T.push(indexArray[e]);h+=2*g,1==(1&g)&&(h+=2)}const w=[],b=0===c?void 0:[],D=0===u?void 0:[],F=0===l?void 0:[],_=0===f?void 0:[],S=void 0,M=new Float32Array(t.data,h);for(let e=0;e<g;e++){let t=p?T[e]:e,n=Math.trunc(e/3);2===i?n=Math.trunc(e/4):3!==i&&4!==i||(n=e<3?0:e-2);let r=0,a=v?3*t:2*t;switch(w.push(M[a]),w.push(M[a+1]),v?(w.push(M[a+2]),r+=3*d):r+=2*d,c){case 1:a=r+3*e,r+=3*g;break;case 2:a=r+3*t,r+=3*d;break;case 3:a=r+3*n,r+=3*x}0!==c&&(b.push(M[a]),b.push(M[a+1]),b.push(M[a+2]))}const y=e.VertexData();1===i||2===i?v?y.setTriangles(w,S,_,b,D,F):y.setTriangles2D(w,S,_,b,D,F):3===i?y.setTriangleStrip(w,S,_,b,D,F):4===i&&y.setTriangleFan(w,S,_,b,D,F),o.addVertexData(y)}return o},r.loadAnimationV1=function(t,r,a){const o=t.header.getUint8(a++);var i="";for(let e=0;e<o;e++)i+=String.fromCharCode(t.header.getUint8(a++));const s=t.header.getUint8(a),c=t.header.getUint16(a+1,n),u=t.header.getUint16(a+3,n),l=t.header.getUint8(a+5);a+=6;const f=1==(1&s),m=2==(2&s);if(e.debugModelLoader){let e="Object["+r+"] is '"+i+"' animation which runs for "+c+"x"+u+" frames";f&&(e+=". Repeats until stopped"),m&&(e+=". Plays in reverse after playing forwards"),console.log(e)}const g=e.ModelAnimation().name(i).loop(f).frames(c).interval(u/window.frag.gameTickMs);for(let e=0;e<l;e++){const e=t.header.getUint8(a++);var d="";for(let n=0;n<e;n++)d+=String.fromCharCode(t.header.getUint8(a++));const r=t.header.getUint8(a++);var h="";for(let e=0;e<r;e++)h+=String.fromCharCode(t.header.getUint8(a++));const o={},i=t.header.getUint16(a,n);a+=2;for(let e=0;e<i;e++){const e=t.header.getUint16(a,n),r=t.header.getUint8(a+2),i=t.header.getFloat32(a+3,n);a+=7;var p="step";1===r?p="linear":2===r&&(p="spline"),o[e]={value:i,transition:p}}g.addChannel({channel:h,pattern:new RegExp(d,"i"),keyframes:o})}return g},r.loadModelV1=function(t,r,a){const o=t.header.getUint8(a++);var i="";for(let e=0;e<o;e++)i+=String.fromCharCode(t.header.getUint8(a++));const s=t.header.getUint8(a),c=t.header.getUint16(a+1,n),u=t.header.getUint16(a+3,n);a+=5;const l=e.Transform().translateXYZ(t.header.getFloat32(a+0,n),t.header.getFloat32(a+4,n),t.header.getFloat32(a+8,n)).rotateXYZ(t.header.getFloat32(a+12,n),t.header.getFloat32(a+16,n),t.header.getFloat32(a+20,n)).scaleXYZ(t.header.getFloat32(a+24,n),t.header.getFloat32(a+28,n),t.header.getFloat32(a+32,n));a+=36;const f=t.header.getUint16(a,n),m=t.header.getUint16(a+2,n);a+=4;const g=1==(1&s),d=2==(2&s),h=4==(4&s);e.debugModelLoader&&console.log("Object["+r+"] is "+(g?"root ":"")+"model "+i+" with "+f+" children and "+m+" animations. Paint mesh "+u+" with material "+c);const p=t.modelStore.getModel(i,!g).transform(l);d&&p.material(t.materials[c]),h&&p.mesh(t.meshes[u]);for(let e=0;e<f;e++){const e=t.header.getUint16(a,n);a+=2,p.addChild(t.models[e])}if(g){e.debugAnimations&&m>0&&console.log("Model #"+r+" '"+i+"' has "+m+" animations");for(let r=0;r<m;r++){const r=t.header.getUint16(a,n);a+=2;const o=t.animations[r];if(e.debugAnimations){const e=o.getChannelGraphs();console.log("  Animation '"+o.getName()+"' has "+e.length+" channels."+(o.__private.loop?" Loop ":"")+o.__private.frames+"x"+o.__private.interval+" frames");for(let t=0;t<e.length;t++)console.log("    Animates "+e[t].channel+" for children matching "+e[t].pattern)}p.addAnimation(o)}}else m>0&&console.warn("Model #"+r+" '"+i+"' has "+m+" animations but is not a root");return p},a.loadModelsFromBuffer=function(t,a,o){const i=new Uint8Array(o),s=new DataView(o,0,i.length),c=i[0],u=s.getUint32(4,n);var l=8;const f=l+u;e.debugModelLoader&&console.log("Model pack V"+c+" is "+i.length+" bytes with "+u+" header bytes");const m={modelStore:t,materialStore:a,header:s,data:o,dataOffset:f,materials:{},meshes:{},animations:{},models:{}};if(1===c)for(var g=s.getUint16(l,n),d=0;0!==g;){const e=s.getUint16(l+2,n),t=s.getUint8(l+4),a=l+5;if(e!==d++)return void console.error("Object indexes are not consecutive");if(0===t)break;1===t?m.materials[e]=r.loadMaterialV1(m,e,a):2===t?m.meshes[e]=r.loadMeshV1(m,e,a):3===t?m.animations[e]=r.loadAnimationV1(m,e,a):4===t?m.models[e]=r.loadModelV1(m,e,a):console.error("Unknown object type "+t),l+=g,g=s.getUint16(l,n)}else console.error("Version "+c+" model packs are not supported")},a.loadModelsFromUrl=function(e,t,n){var r=new XMLHttpRequest;r.responseType="arraybuffer",r.onreadystatechange=function(){4==this.readyState&&200==this.status&&a.loadModelsFromBuffer(e,t,this.response)},r.open("GET",n,!0),r.send()},a}()},655:()=>{window.frag.Material=function(){const e={textures:{},disposeTextures:!1},t={__private:e,dispose:function(){if(e.disposeTextures)for(let t in e.textures){const n=e.textures[t];n&&n.dispose()}e.textures={}},disposeTextures:function(n){return e.disposeTextures=n,t},name:function(n){return e.name=n,t},setTexture:function(n,r){if(e.disposeTextures){const t=e.textures[n];t&&t.dispose()}return e.textures[n]=r,t},apply:function(n,r){for(let t in e.textures){const a=e.textures[t];a&&a.apply(t,n,r)}return t}};return t}},394:()=>{window.frag.Texture=function(){const e=window.frag.gl,t={glTexture:null,generated:!1,internalFormat:e.RGBA,format:e.RGBA,dataType:e.UNSIGNED_BYTE,valuesPerPixel:4},n={__private:t,textureUnit:window.frag.allocateTextureUnit(),dispose:function(){t.glTexture&&(e.deleteTexture(t.glTexture),t.glTexture=null,t.disposed=!0)},name:function(e){return t.name=e,n},dataFormat:function(r){return t.internalFormat=r,t.format=r,r===e.RGBA?(t.dataType=e.UNSIGNED_BYTE,t.valuesPerPixel=4):r===e.RGB?(t.dataType=e.UNSIGNED_BYTE,t.valuesPerPixel=3):r===e.LUMINANCE_ALPHA?(t.dataType=e.UNSIGNED_BYTE,t.valuesPerPixel=2):r!==e.LUMINANCE&&formaat!==e.ALPHA||(t.dataType=e.UNSIGNED_BYTE,t.valuesPerPixel=1),n}};return t.setup=function(n,r){t.width=n,t.height=r,t.glTexture||(t.glTexture=e.createTexture()),e.bindTexture(e.TEXTURE_2D,t.glTexture),0==(n&n-1)&&0==(r&r-1)||(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),t.generated=!0)},n.fromArrayBuffer=function(r,a,o,i,s){let c;return t.dataType===e.UNSIGNED_BYTE&&(c=new Uint8Array(a,o,i*s*t.valuesPerPixel)),t.setup(i,s),e.texImage2D(e.TEXTURE_2D,r,t.internalFormat,i,s,0,t.format,t.dataType,c),n},n.fromImage=function(r,a){const o=function(){t.setup(a.width,a.height),e.texImage2D(e.TEXTURE_2D,r,t.internalFormat,t.format,t.dataType,a)};return a.onload?o():a.onload=o,n},n.fromUrl=function(e,t,r){const a=new Image;return n.fromImage(e,a),void 0!==r&&(a.crossOrigin=r),a.src=t,n},n.update=function(e,r){const a=window.frag.gl;return t.scene&&(void 0!==e&&void 0!==r&&(e===t.width&&r===t.height||n.fromScene(t.scene,e,r)),a.bindFramebuffer(a.FRAMEBUFFER,t.frameBuffer),a.viewport(0,0,t.width,t.height),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),t.scene.adjustToViewport(a),t.scene.draw(a)),n},n.fromScene=function(e,r,a){const o=window.frag.gl;return t.setup(r,a),o.texImage2D(o.TEXTURE_2D,0,t.internalFormat,r,a,0,t.format,t.dataType,null),t.scene=e,t.frameBuffer=o.createFramebuffer(),o.bindFramebuffer(o.FRAMEBUFFER,t.frameBuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,t.glTexture,0),t.depthBuffer=o.createRenderbuffer(),o.bindRenderbuffer(o.RENDERBUFFER,t.depthBuffer),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_COMPONENT16,r,a),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,t.depthBuffer),n.update(r,a)},n.apply=function(e,r,a){return a.uniforms[e]&&t.glTexture?(r.activeTexture(r.TEXTURE0+n.textureUnit),r.bindTexture(r.TEXTURE_2D,t.glTexture),t.generated||(r.generateMipmap(r.TEXTURE_2D),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),t.generated=!0),r.uniform1i(a.uniforms[e],n.textureUnit),n):n},n}},996:()=>{window.frag=window.frag||{},window.frag.Matrix={m3Identity:function(){return[1,0,0,0,1,0,0,0,1]},m3Invert:function(e){return e},m3Transpose:function(e){return[e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]]},m3Xm3:function(e,t){const n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],l=e[8],f=t[0],m=t[1],g=t[2],d=t[3],h=t[4],p=t[5],v=t[6],x=t[7],T=t[8];return[f*n+m*o+g*c,f*r+m*i+g*u,f*a+m*s+g*l,d*n+h*o+p*c,d*r+h*i+p*u,d*a+h*s+p*l,v*n+x*o+T*c,v*r+x*i+T*u,v*a+x*s+T*l]},m3Xv3:function(e,t){const n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],l=e[8],f=t[0],m=t[1],g=t[2];return[f*n+m*o+g*c,f*r+m*i+g*u,f*a+m*s+g*l]},m4Identity:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},m4Invert:function(e){return[e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10],e[3],e[7],e[11]]},m4Transpose:function(e){return[e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]]},m4Xm4:function(e,t){const n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],l=e[8],f=e[9],m=e[10],g=e[11],d=e[12],h=e[13],p=e[14],v=e[15],x=t[0],T=t[1],w=t[2],b=t[3],D=t[4],F=t[5],_=t[6],S=t[7],M=t[8],y=t[9],A=t[10],E=t[11],C=t[12],R=t[13],U=t[14],V=t[15];return[x*n+T*i+w*l+b*d,x*r+T*s+w*f+b*h,x*a+T*c+w*m+b*p,x*o+T*u+w*g+b*v,D*n+F*i+_*l+S*d,D*r+F*s+_*f+S*h,D*a+F*c+_*m+S*p,D*o+F*u+_*g+S*v,M*n+y*i+A*l+E*d,M*r+y*s+A*f+E*h,M*a+y*c+A*m+E*p,M*o+y*u+A*g+E*v,C*n+R*i+U*l+V*d,C*r+R*s+U*f+V*h,C*a+R*c+U*m+V*p,C*o+R*u+U*g+V*v]},m4Xv4:function(e,t){const n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],s=e[5],c=e[6],u=e[7],l=e[8],f=e[9],m=e[10],g=e[11],d=e[12],h=e[13],p=e[14],v=e[15],x=t[0],T=t[1],w=t[2],b=t[3];return[x*n+T*i+w*l+b*d,x*r+T*s+w*f+b*h,x*a+T*c+w*m+b*p,x*o+T*u+w*g+b*v]}},window.tests=window.tests||{},window.tests.expectArray=function(e,t,n){n.length!==t.length&&console.log("Test "+e+" wrong length array");for(let r=0;r<t.length;r++)Math.abs(t[r]-n[r])>.001&&console.log("Test "+e+" index "+r+" was "+n[r]+" expecting "+t[r])},window.tests.matrix={t1:window.frag.Matrix.m4Transpose([1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),run:function(e){window.tests.expectArray("Transpose matrix",e.t1,[1,5,9,13,2,6,10,14,3,7,11,15,4,8,12,16])}},window.tests.matrix.run(window.tests.matrix)},197:()=>{window.frag=window.frag||{},window.frag.Triangle={makeTriangleFromVectors:function(e,t,n){return{a:e,b:t,c:n}},makeTriangleFromArray2D:function(e,t,n,r){return e?{a:[e[t],e[t+1]],b:[e[n],e[n+1]],c:[e[r],e[r+1]]}:null},makeTriangleFromArray3D:function(e,t,n,r){return e?{a:[e[t],e[t+1],e[t+2]],b:[e[n],e[n+1],e[n+2]],c:[e[r],e[r+1],e[r+2]]}:null},normal:function(e){const t=window.frag.Vector,n=t.sub(e.a,e.b),r=t.sub(e.c,e.b);return t.normalize(t.cross(n,r))}}},601:()=>{window.frag=window.frag||{},window.frag.Vector={makeVectorFromArray2D:function(e,t){return e?[e[t],e[t+1]]:null},makeVectorFromArray3D:function(e,t){return e?[e[t],e[t+1],e[t+2]]:null},zero:function(e){const t=[0,0,0,0,0];return t.length=e,t},add:function(e,t){const n=[];if(Array.isArray(t))for(let r=0;r<e.length;r++)n.push(e[r]+t[r]);else for(let r=0;r<e.length;r++)n.push(e[r]+t);return n},sub:function(e,t){const n=[];if(Array.isArray(t))for(let r=0;r<e.length;r++)n.push(e[r]-t[r]);else for(let r=0;r<e.length;r++)n.push(e[r]-t);return n},mult:function(e,t){const n=[];if(Array.isArray(t))for(let r=0;r<e.length;r++)n.push(e[r]*t[r]);else for(let r=0;r<e.length;r++)n.push(e[r]*t);return n},div:function(e,t){const n=[];if(Array.isArray(t))for(let r=0;r<e.length;r++)n.push(e[r]/t[r]);else for(let r=0;r<e.length;r++)n.push(e[r]/t);return n},length:function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n]*e[n];return Math.sqrt(t)},average:function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push((e[r]+t[r])/2);return n},cross:function(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]},normalize:function(e){const t=window.frag.Vector.length(e);if(t<1e-5)return e;const n=[];for(let r=0;r<e.length;r++)n.push(e[r]/t);return n}}},175:()=>{window.frag.MeshData=function(){const e=window.frag,t=e.gl,n={glBuffer:t.createBuffer(),meshFragments:[],debugFragments:[],finalized:!1,fromBuffer:!1,smoothShading:!0,smoothTexture:!1,wireframe:!1,normalLength:0,normalColor:[0,0,255]},r={__private:n,calcNormals:!0,calcTangents:!0,calcBitangents:!1,dispose:function(){n.glBuffer&&(t.deleteBuffer(n.glBuffer),n.glBuffer=null)},name:function(e){return n.name=e,r},clear:function(){return n.meshFragments.length=0,n.finalized=!1,r},shadeSmooth:function(){return n.smoothShading=!0,n.finalized=!1,r},shadeFlat:function(){return n.smoothShading=!1,n.finalized=!1,r},textureSmooth:function(){return n.smoothTexture=!0,n.finalized=!1,r},textureFlat:function(){return n.smoothTexture=!1,n.finalized=!1,r},wireframe:function(e){return n.wireframe=!!e,n.finalized=!1,r},drawNormals:function(e,t){return n.normalLength=e,void 0!==t&&(n.normalColor=t),n.finalized=!1,r}};return n.Fragment=function(e){return{vertexData:e,renderData:null,vertexDataOffset:void 0,colorDataOffset:void 0,uvDataOffset:void 0,normalDataOffset:void 0,tangentDataOffset:void 0,bitangentDataOffset:void 0}},n.addFragment=function(e){return n.meshFragments.push(n.Fragment(e)),n.finalized=!1,r},r.addVertexData=function(e){return n.addFragment(e)},r.addTriangles2D=function(t,r,a,o,i,s){const c=e.VertexData().setTriangles2D(t,r,a,o,i,s);return n.addFragment(c)},r.addTriangles=function(t,r,a,o,i,s){const c=e.VertexData().setTriangles(t,r,a,o,i,s);return n.addFragment(c)},r.addTriangleStrip=function(t,r,a,o,i,s){const c=e.VertexData().setTriangleStrip(t,r,a,o,i,s);return n.addFragment(c)},r.addTriangleFan=function(t,r,a,o,i,s){const c=e.VertexData().setTriangleFan(t,r,a,o,i,s);return n.addFragment(c)},r.fromBuffer=function(a,o,i,s,c,u,l,f,m,g){const d=e.VertexData();d.vertexDimensions=o,d.vertexCount=i,d.primitiveType=s,d.extractTriangles=function(){},n.addFragment(d);const h=n.meshFragments[n.meshFragments.length-1];return h.renderData=d,h.vertexDataOffset=c,h.colorDataOffset=u,h.uvDataOffset=l,h.normalDataOffset=f,h.tangentDataOffset=m,h.bitangentDataOffset=g,t.bindBuffer(t.ARRAY_BUFFER,n.glBuffer),t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW),n.finalized=!0,n.fromBuffer=!0,r},n.addFragmentDebugInfo=function(t){if(!n.wireframe&&0==n.normalLength)return;let r=t;n.wireframe||(r=n.Fragment(t.vertexData),n.debugFragments.push(r));const a=[],o=[],i=[],s=[],c=function(e){const r=t.renderData.getVertexVector(e),c=t.renderData.getColor(e),u=t.renderData.getUvVector(e),l=t.renderData.getNormalVector(e);r&&r.forEach((e=>a.push(e))),c?c.forEach((e=>o.push(e))):n.normalColor.forEach((()=>o.push(0))),u&&u.forEach((e=>i.push(e))),l&&l.forEach((e=>s.push(e)))},u=function(e){const r=t.renderData.getVertexVector(e),c=t.renderData.getUvVector(e),u=t.renderData.getNormalVector(e);if(r){for(let e=0;e<r.length;e++)a.push(r[e]);for(let e=0;e<r.length;e++)a.push(r[e]+u[e]*n.normalLength)}n.normalColor.forEach((e=>o.push(e))),n.normalColor.forEach((e=>o.push(e))),c&&(c.forEach((e=>i.push(e))),c.forEach((e=>i.push(e)))),u&&(u.forEach((e=>s.push(e))),u.forEach((e=>s.push(e))))};t.vertexData.extractTriangles((function(e,t,r){n.wireframe&&(c(e),c(t),c(t),c(r),c(r),c(e)),n.normalLength>0&&(u(e),u(t),u(t))})),2==t.vertexData.vertexDimensions?r.renderData=e.VertexData().setLines2D(a,o,i,s):r.renderData=e.VertexData().setLines(a,o,i,s)},n.finalize=function(){n.finalized=!0;const a=e.MeshOptimizer().setFragments(n.meshFragments).initialize(n.smoothShading,n.smoothTexture);r.calcTangents&&a.calcTangentsFromUvs(),r.calcBitangents&&a.calcBitangentsFromUvs(),r.calcNormals&&a.calcNormalsFromCross(),r.calcNormals&&a.calcNormalsFromGeometry(),r.calcBitangents&&a.calcBitangentsFromCross(),n.debugFragments=[],n.meshFragments.forEach((e=>{n.addFragmentDebugInfo(e)}));let o=0;const i=function(e){o+=e.renderData.verticies.length,e.renderData.colors&&(o+=e.renderData.colors.length),e.renderData.uvs&&(o+=e.renderData.uvs.length),e.renderData.normals&&(o+=e.renderData.normals.length),e.renderData.tangents&&(o+=e.renderData.tangents.length),e.renderData.bitangents&&(o+=e.renderData.bitangents.length)};n.meshFragments.forEach(i),n.debugFragments.forEach(i);const s=new Float32Array(o);let c=0;const u=function(e){if(!e)return;for(let t=0;t<e.length;t++)s[c+t]=e[t];const t=c;return c+=e.length,t*Float32Array.BYTES_PER_ELEMENT},l=function(e){e.vertexDataOffset=u(e.renderData.verticies),e.colorDataOffset=u(e.renderData.colors),e.uvDataOffset=u(e.renderData.uvs),e.normalDataOffset=u(e.renderData.normals),e.tangentDataOffset=u(e.renderData.tangents),e.bitangentDataOffset=u(e.renderData.bitangents)};return n.meshFragments.forEach(l),n.debugFragments.forEach(l),t.bindBuffer(t.ARRAY_BUFFER,n.glBuffer),t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW),r},n.drawFragmentPosition=function(e,n){e.attributes.position>=0&&(null!=n.vertexDataOffset?(t.enableVertexAttribArray(e.attributes.position),t.vertexAttribPointer(e.attributes.position,n.renderData.vertexDimensions,t.FLOAT,!1,0,n.vertexDataOffset)):t.disableVertexAttribArray(e.attributes.position))},n.drawFragmentColor=function(e,n){e.attributes.color>=0&&(null!=n.colorDataOffset?(t.enableVertexAttribArray(e.attributes.color),t.vertexAttribPointer(e.attributes.color,n.renderData.colorDimensions,t.FLOAT,!1,0,n.colorDataOffset)):t.disableVertexAttribArray(e.attributes.color))},n.drawFragmentTexture=function(e,n){e.attributes.texture>=0&&(null!=n.uvDataOffset?(t.enableVertexAttribArray(e.attributes.texture),t.vertexAttribPointer(e.attributes.texture,n.renderData.uvDimensions,t.FLOAT,!1,0,n.uvDataOffset)):t.disableVertexAttribArray(e.attributes.texture))},n.drawFragmentNormals=function(e,n){e.attributes.normal>=0&&(null!=n.normalDataOffset?(t.enableVertexAttribArray(e.attributes.normal),t.vertexAttribPointer(e.attributes.normal,n.renderData.normalDimensions,t.FLOAT,!0,0,n.normalDataOffset)):t.disableVertexAttribArray(e.attributes.normal))},n.drawFragmentTangents=function(e,n){e.attributes.tangent>=0&&(null!=n.tangentDataOffset?(t.enableVertexAttribArray(e.attributes.tangent),t.vertexAttribPointer(e.attributes.tangent,n.renderData.normalDimensions,t.FLOAT,!0,0,n.tangentDataOffset)):t.disableVertexAttribArray(e.attributes.tangent))},n.drawFragmentBitangents=function(e,n){e.attributes.bitangent>=0&&(null!=n.bitangentDataOffset?(t.enableVertexAttribArray(e.attributes.bitangent),t.vertexAttribPointer(e.attributes.bitangent,n.renderData.normalDimensions,t.FLOAT,!0,0,n.bitangentDataOffset)):t.disableVertexAttribArray(e.attributes.bitangent))},n.drawFragment=function(e,r){n.drawFragmentPosition(e,r),n.drawFragmentColor(e,r),n.drawFragmentTexture(e,r),n.drawFragmentNormals(e,r),n.drawFragmentTangents(e,r),n.drawFragmentBitangents(e,r),t.drawArrays(r.renderData.primitiveType,0,r.renderData.vertexCount)},r.draw=function(e,t){n.finalized||n.fromBuffer||n.finalize(),e.bindBuffer(e.ARRAY_BUFFER,n.glBuffer);for(let e=0;e<n.meshFragments.length;e++){const r=n.meshFragments[e];n.drawFragment(t,r)}for(let e=0;e<n.debugFragments.length;e++){const r=n.debugFragments[e];n.drawFragment(t,r)}return r},r}},3:()=>{window.frag.MeshOptimizer=function(){const e=window.frag,t={meshFragments:null,smoothShading:!0,smoothTexture:!1,fragmentTriangles:null,groups:null,groupIndecies:null},n={__private:t};return t.ensureTriangles=function(){t.fragmentTriangles||(t.fragmentTriangles=[],t.meshFragments.forEach((n=>{const r=n.vertexData,a={triangles:[],vertexTriangleIndecies:[]};a.vertexTriangleIndecies.length=r.vertexCount,r.verticies&&r.extractTriangles((function(t,n,o){const i=r.getVertexVector(t),s=r.getVertexVector(n),c=r.getVertexVector(o),u={triangle:e.Triangle.makeTriangleFromVectors(i,s,c),normal:null,tangent:null,bitangent:null};if(u.normal=e.Triangle.normal(u.triangle),r.uvs){const a=r.getUvVector(t),l=r.getUvVector(n),f=r.getUvVector(o),m=e.Vector.sub(s,i),g=e.Vector.sub(c,i),d=e.Vector.sub(l,a),h=e.Vector.sub(f,a),p=d[0]*h[1]-d[1]*h[0];if(0===p)u.tangent=e.Vector.zero(r.normalDimensions),u.bitangent=e.Vector.zero(r.normalDimensions);else{const t=1/p;u.tangent=e.Vector.normalize(e.Vector.mult(e.Vector.sub(e.Vector.mult(m,h[1]),e.Vector.mult(g,d[1])),t)),u.bitangent=e.Vector.normalize(e.Vector.mult(e.Vector.sub(e.Vector.mult(g,d[0]),e.Vector.mult(m,h[0])),t))}}a.triangles.push(u);const l=a.triangles.length-1;a.vertexTriangleIndecies[t]=l,a.vertexTriangleIndecies[n]=l,a.vertexTriangleIndecies[o]=l})),t.fragmentTriangles.push(a)})))},t.ensureGroups=function(){if(t.groups)return;t.groups=[],t.groupIndecies={};const n=function(e,t,n){if(e.vertexDimensions!==n.length)return!1;const r=e.vertexIndex(t);for(var a=0;a<n.length;a++)if(Math.abs(e.verticies[r+a]-n[a])>1e-5)return!1;return!0};for(let a=0;a<t.meshFragments.length;a++){const o=t.meshFragments[a],i=t.groupIndecies[a]||[];if(t.groupIndecies[a]=i,o.vertexData.verticies)for(let s=0;s<o.vertexData.vertexCount;s++){let c=!1;for(var r=0;!c&&r<t.groups.length;r++){const e=t.groups[r];n(o.vertexData,s,e.vertex)&&(e.fragmentIndecies[a]=e.fragmentIndecies[a]||[],e.fragmentIndecies[a].push(s),i.push(r),c=!0)}if(!c){i.push(t.groups.length);const n={vertex:o.vertexData.getVertexVector(s),fragmentIndecies:{},normal:e.Vector.zero(o.vertexData.normalDimensions),uv:e.Vector.zero(o.vertexData.uvDimensions)};n.fragmentIndecies[a]=[s],t.groups.push(n)}}}},t.calcGroupNormals=function(){t.ensureGroups();for(let n=0;n<t.groups.length;n++){const r=t.groups[n];r.normal=e.Vector.zero(t.meshFragments[0].renderData.normalDimensions);for(const n in r.fragmentIndecies){const a=t.meshFragments[n],o=a.renderData?a.renderData:a.vertexData;if(o&&o.normals){const t=r.fragmentIndecies[n];for(let n=0;n<t.length;n++){const a=t[n],i=o.getNormalVector(a);r.normal=e.Vector.add(r.normal,i)}}}r.normal=e.Vector.normalize(r.normal)}},t.calcGroupUvs=function(){t.ensureGroups();for(let e=0;e<t.groups.length;e++){const n=t.groups[e];for(const e in n.fragmentIndecies){const r=t.meshFragments[e],a=r.renderData?r.renderData:r.vertexData;if(a){const t=n.fragmentIndecies[e];if(t.length>0){const e=t[0];n.uv=a.getUvVector(e)}}}}},t.calcSmoothShading=function(){for(let e=0;e<t.meshFragments.length;e++)if(!t.meshFragments[e].renderData.normals)return;t.calcGroupNormals();for(let r=0;r<t.meshFragments.length;r++){const a=t.meshFragments[r].renderData,o=t.groupIndecies[r];if(o.length){a.normals=[];for(var e=0;e<a.vertexCount;e++){const r=t.groups[o[e]];for(var n=0;n<a.normalDimensions;n++)a.normals.push(r.normal[n])}}}},t.calcSmoothTexture=function(){t.calcGroupUvs();for(let r=0;r<t.meshFragments.length;r++){const a=t.meshFragments[r].renderData,o=t.groupIndecies[r];if(o.length){a.uvs=[];for(var e=0;e<a.vertexCount;e++){const r=t.groups[o[e]];for(var n=0;n<a.uvDimensions;n++)a.uvs.push(r.uv[n])}}}},n.setFragments=function(e){return t.meshFragments=e,n},n.initialize=function(e,r){return t.smoothShading=e,t.smoothTexture=r,t.meshFragments.forEach((e=>{e.renderData=e.vertexData.clone()})),r&&t.calcSmoothTexture(),n},n.calcTangentsFromUvs=function(){for(let n=0;n<t.meshFragments.length;n++){const r=t.meshFragments[n],a=r.renderData,o=r.vertexData;if(!a.tangents)if(o.tangents){a.tangents=[];for(let t=0;t<o.vertexCount;t++)for(var e=0;e<o.normalDimensions;e++)a.tangents.push(o.tangents[o.tangentIndex(t,e)])}else if(a.uvs){t.ensureTriangles();const e=t.fragmentTriangles[n];if(e&&e.triangles){a.tangents=[],a.tangents.length=a.normalDimensions*a.vertexCount;for(let t=0;t<a.vertexCount;t++){const n=e.vertexTriangleIndecies[t],r=e.triangles[n];r&&a.setTangentVector(t,r.tangent)}}}}return n},n.calcBitangentsFromUvs=function(){for(let n=0;n<t.meshFragments.length;n++){const r=t.meshFragments[n],a=r.renderData,o=r.vertexData;if(!a.bitangents)if(o.bitangents){a.bitangents=[];for(let t=0;t<o.vertexCount;t++)for(var e=0;e<o.normalDimensions;e++)a.bitangents.push(o.bitangents[o.bitangentIndex(t,e)])}else if(a.uvs){t.ensureTriangles();const e=t.fragmentTriangles[n];if(e&&e.triangles){a.bitangents=[],a.bitangents.length=a.normalDimensions*a.vertexCount;for(let t=0;t<a.vertexCount;t++){const n=e.vertexTriangleIndecies[t],r=e.triangles[n];r&&a.setBitangentVector(t,r.bitangent)}}}}return n},n.calcNormalsFromCross=function(){for(let n=0;n<t.meshFragments.length;n++){const a=t.meshFragments[n],o=a.renderData,i=a.vertexData;if(!o.normals)if(i.normals){o.normals=[];for(let e=0;e<i.vertexCount;e++)for(var r=0;r<i.normalDimensions;r++)o.normals.push(i.normals[i.normalIndex(e,r)])}else if(o.tangents&&o.bitangents){o.normals=[];for(let t=0;t<i.vertexCount;t++){const n=o.getTangentVector(t),a=o.getBitangentVector(t),i=e.Vector.cross(n,a);for(r=0;r<i.length;r++)o.normals.push(i[r])}}}return t.smoothShading&&t.calcSmoothShading(),n},n.calcNormalsFromGeometry=function(){for(let n=0;n<t.meshFragments.length;n++){const r=t.meshFragments[n],a=r.renderData,o=r.vertexData;if(!a.normals)if(o.normals){a.normals=[];for(let t=0;t<o.vertexCount;t++)for(var e=0;e<o.normalDimensions;e++)a.normals.push(o.normals[o.normalIndex(t,e)])}else{t.ensureTriangles();const e=t.fragmentTriangles[n];if(e&&e.triangles){a.normals=[],a.normals.length=a.normalDimensions*a.vertexCount;for(let t=0;t<a.vertexCount;t++){const n=e.vertexTriangleIndecies[t],r=e.triangles[n];r&&a.setNormalVector(t,r.normal)}}}}return t.smoothShading&&t.calcSmoothShading(),n},n.calcBitangentsFromCross=function(){for(let n=0;n<t.meshFragments.length;n++){const a=t.meshFragments[n],o=a.renderData,i=a.vertexData;if(!o.bitangents)if(i.bitangents){o.bitangents=[];for(let e=0;e<i.vertexCount;e++)for(var r=0;r<i.normalDimensions;r++)o.bitangents.push(i.bitangents[i.bitangentIndex(e,r)])}else if(o.tangents&&o.normals){o.bitangents=[];for(let t=0;t<i.vertexCount;t++){const n=o.getNormalVector(t),a=o.getTangentVector(t),i=e.Vector.cross(n,a);for(r=0;r<i.length;r++)o.bitangents.push(i[r])}}}return n},n}},816:()=>{window.frag.Model=function(e){const t=window.frag,n={name:null,parent:e,children:[],meshData:null,shader:null,material:null,transform:t.Transform().identity()},r={__private:n,animations:[],addFlattenedChildren:function(e,t){for(let r=0;r<n.children.length;r++){let a=n.children[r];t(a)&&e.push(a),a.addFlattenedChildren(e,t)}},name:function(e){return n.name=e,r},getName:function(){return n.name},transform:function(e){return n.transform=e,r},getTransform:function(){return n.transform},shader:function(e){if(e.is3d!==n.transform.is3d){const e=n.transform.is3d?"3D":"2D";console.error("Model '"+n.name+"' has a "+e+" transform and must use a "+e+" shader")}return n.shader=e,r},getShader:function(){return n.shader?n.shader:n.parent?n.parent.getShader():void 0},mesh:function(e){return n.meshData=e,r},material:function(e){return n.material=e,r},getMaterial:function(){return n.material?n.material:n.parent?n.parent.getMaterial():void 0},addChild:function(e){return e?e.__private.parent=r:e=window.frag.Model(r),n.children.push(e),e},addAnimation:function(e){const t=[];r.addFlattenedChildren(t,(function(e){return e.getName()}));const n=[],a=e.getChannelGraphs();for(let e=0;e<t.length;e++){const r=t[e],o=r.getName();for(let e=0;e<a.length;e++){const t=a[e];t.pattern.test(o)&&n.push({graph:t,model:r})}}return n.length>0&&r.animations.push({modelAnimation:e,childAnimations:n}),r},draw:function(e,a,o,i){let s;if(i&&n.name){const e=i[n.name];e&&(s=e.getMatrix())}let c=n.transform.getMatrix();s&&(c=n.transform.is3d?t.Matrix.m4Xm4(c,s):t.Matrix.m3Xm3(c,s));const u=a.getMatrix(),l=o.getMatrix();n.transform.is3d?(a=t.Transform(t.Matrix.m4Xm4(u,c)),o=t.Transform(t.Matrix.m4Xm4(l,c))):(a=t.Transform2D(t.Matrix.m3Xm3(u,c)),o=t.Transform2D(t.Matrix.m3Xm3(l,c)));const f=r.getShader();if(void 0!==f&&n.meshData){f.bind(e);var m=r.getMaterial();m&&m.apply(e,f),void 0!==f.uniforms.clipMatrix&&o.apply(e,f.uniforms.clipMatrix),void 0!==f.uniforms.modelMatrix&&a.apply(e,f.uniforms.modelMatrix),n.meshData.draw(e,f),f.unbind(e)}for(let t=0;t<n.children.length;t++)n.children[t].draw(e,a,o,i);return r}};return r}},312:()=>{window.frag.Scene=function(){const e={sceneObjects:[],activeCamera:null,cameraUpdated:function(){}},t={__private:e,dispose:function(){e.activeCamera&&e.activeCamera.worldToClipTransform.observableMatrix.unsubscribe(e.cameraUpdated)},addObject:function(n){return e.sceneObjects.push(n),t},removeObject:function(t){for(let n=0;n<e.sceneObjects.length;n++)if(e.sceneObjects[n]===t)return e.sceneObjects.splice(n,1),!0;return!1},camera:function(n){return e.activeCamera&&e.activeCamera.worldToClipTransform.observableMatrix.unsubscribe(e.cameraUpdated),e.activeCamera=n,n&&n.worldToClipTransform.observableMatrix.subscribe(e.cameraUpdated),t},setViewport:function(n){return e.activeCamera&&e.activeCamera.setViewport(n),t},adjustToViewport:function(n){return e.activeCamera&&e.activeCamera.adjustToViewport(n),t},draw:function(t){if(e.activeCamera)for(let n=0;n<e.sceneObjects.length;n++)e.sceneObjects[n].draw(t,e.activeCamera.worldToClipTransform)}};return t}},390:()=>{window.frag.SceneObject=function(e){const t={model:e,enabled:!0,position:null,animationPosition:null,animationMap:{}},n={__private:t,animations:{}};for(let r=0;r<e.animations.length;r++){const a=e.animations[r];for(let n=0;n<a.childAnimations.length;n++){const r=a.childAnimations[n].model.getName();if(!t.animationMap[r]){const n=window.frag.ObjectAnimationState();window.frag.debugAnimations&&(n.__private.modelName=e.getName(),n.__private.childModelName=r),t.animationMap[r]=n}}const o=window.frag.SceneObjectAnimation(a,t.animationMap);n.animations[a.modelAnimation.getName()]=o}const r=function(e,t){const n=e.getMatrix(),r=t.getMatrix();return e.is3d?frag.Transform(frag.Matrix.m4Xm4(n,r)):frag.Transform2D(frag.Matrix.m3Xm3(n,r))};return n.getPosition=function(){if(t.position)return t.position;const e=t.model.getTransform();return t.position=window.frag.ScenePosition(e.clone()),t.position},n.ensureAnimationPosition=function(){if(t.animationPosition)return t.animationPosition;const e=t.model.getTransform();return e?(t.animationPosition=window.frag.ScenePosition(e.clone()),t.animationPosition):null},n.deleteAnimationPosition=function(){return t.animationPosition=null,n},t.getModelToWorldTransform=function(){const e=n.getPosition();let a=r(t.model.getTransform(),e.getTransform());if(!t.animationPosition)return a;const o=t.animationPosition.getTransform();return r(a,o)},n.enable=function(){return t.enabled=!0,n},n.disable=function(){return t.enabled=!1,n},n.dispose=function(){return n.disable(),n},n.draw=function(e,a){if(!t.enabled)return n;const o=t.getModelToWorldTransform();if(!o)return n;let i=r(a,o);return t.model.draw(e,o,i,t.animationMap),n},n}},266:()=>{window.frag.ScenePosition=function(e){const t={scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},translation:{x:0,y:0,z:0},transform:e,isDirty:!0},n={__private:t};return t.ensureTransform=function(){t.isDirty&&(t.isDirty=!1,t.transform.is3d?t.transform.identity().translateXYZ(t.translation.x,t.translation.y,t.translation.z).rotateXYZ(t.rotation.x,t.rotation.y,t.rotation.z).scaleXYZ(t.scale.x,t.scale.y,t.scale.z):t.transform.identity().translateXY(t.translation.x,t.translation.y).rotate(t.rotation.z).scaleXY(t.scale.x,t.scale.y))},n.transform=function(e){return t.transform=e,t.isDirty=!0,n},n.getTransform=function(){return t.ensureTransform(),t.transform},n.getScaleX=function(){return t.scale.x},n.getScaleY=function(){return t.scale.y},n.getScaleZ=function(){return t.scale.z},n.scale=function(e){return t.scale.x=e,t.scale.y=e,t.scale.z=e,t.isDirty=!0,n},n.scaleXYZ=function(e,r,a){return t.scale.x=e,t.scale.y=r,t.scale.z=a,t.isDirty=!0,n},n.scaleX=function(e){return t.scale.x=e,t.isDirty=!0,n},n.scaleY=function(e){return t.scale.y=e,t.isDirty=!0,n},n.scaleZ=function(e){return t.scale.z=e,t.isDirty=!0,n},n.scaleBy=function(e){n.rotateXYZ(t.scale.x*e[0],t.scale.y*e[1],t.scale.z*e[2])},n.scaleByXYZ=function(e,r,a){n.rotateXYZ(t.scale.x*e,t.scale.y*r,t.scale.z*a)},n.getRotateX=function(){return t.rotation.x},n.getRotateY=function(){return t.rotation.y},n.getRotateZ=function(){return t.rotation.z},n.rotateXYZ=function(e,r,a){return t.rotation.x=e,t.rotation.y=r,t.rotation.z=a,t.isDirty=!0,n},n.rotateX=function(e){return t.rotation.x=e,t.isDirty=!0,n},n.rotateY=function(e){return t.rotation.y=e,t.isDirty=!0,n},n.rotateZ=function(e){return t.rotation.z=e,t.isDirty=!0,n},n.rotateBy=function(e){n.rotateXYZ(t.rotation.x+e[0],t.rotation.y+e[1],t.rotation.z+e[2])},n.rotateByXYZ=function(e,r,a){n.rotateXYZ(t.rotation.x+e,t.rotation.y+r,t.rotation.z+a)},n.getPositionX=function(){return t.translation.x},n.getPositionY=function(){return t.translation.y},n.getPositionZ=function(){return t.translation.z},n.positionXYZ=function(e,r,a){return t.translation.x=e,t.translation.y=r,t.translation.z=a,t.isDirty=!0,n},n.positionX=function(e){return t.translation.x=e,t.isDirty=!0,n},n.positionY=function(e){return t.translation.y=e,t.isDirty=!0,n},n.positionZ=function(e){return t.translation.z=e,t.isDirty=!0,n},n.moveBy=function(e){n.positionXYZ(t.translation.x+e[0],t.translation.y+e[1],t.translation.z+e[2])},n.moveByXYZ=function(e,r,a){n.positionXYZ(t.translation.x+e,t.translation.y+r,t.translation.z+a)},n}},288:()=>{window.frag.VertexData=function(){const e=window.frag,t=e.gl,n={},r={__private:n,primitiveType:t.TRIANGLES,vertexCount:0,verticies:void 0,vertexDimensions:3,colors:void 0,colorDimensions:3,uvs:void 0,uvDimensions:2,normals:void 0,normalDimensions:3,tangents:void 0,bitangents:void 0,clone:function(){const t=e.VertexData();return t.primitiveType=r.primitiveType,t.vertexCount=r.vertexCount,t.vertexDimensions=r.vertexDimensions,t.colorDimensions=r.colorDimensions,t.uvDimensions=r.uvDimensions,t.normalDimensions=r.normalDimensions,t.verticies=r.verticies,r.colors&&(t.colors=Array.from(r.colors)),r.uvs&&(t.uvs=Array.from(r.uvs)),r.normals&&(t.normals=Array.from(r.normals)),r.tangents&&(t.tangents=Array.from(r.tangents)),r.bitangents&&(t.bitangents=Array.from(r.bitangents)),t},vertexIndex:function(e,t){return e*r.vertexDimensions+(t||0)},colorIndex:function(e,t){return e*r.colorDimensions+(t||0)},uvIndex:function(e,t){return e*r.uvDimensions+(t||0)},normalIndex:function(e,t){return e*r.normalDimensions+(t||0)},tangentIndex:function(e,t){return e*r.normalDimensions+(t||0)},bitangentIndex:function(e,t){return e*r.normalDimensions+(t||0)}};return n.getVector=function(t,n,r){return 2===r?e.Vector.makeVectorFromArray2D(t,n):e.Vector.makeVectorFromArray3D(t,n)},n.setVector=function(e,t,n){for(i=0;i<n.length;i++)e[t+i]=n[i]},r.getVertexVector=function(e){return n.getVector(r.verticies,r.vertexIndex(e),r.vertexDimensions)},r.setVertexVector=function(e,t){return n.setVector(r.verticies,r.vertexIndex(e),t)},r.getColor=function(e){return n.getVector(r.colors,r.colorIndex(e),r.colorDimensions)},r.setColor=function(e,t){return n.setVector(r.colors,r.colorIndex(e),t)},r.getUvVector=function(e){return n.getVector(r.uvs,r.uvIndex(e),r.uvDimensions)},r.setUvVector=function(e,t){return n.setVector(r.uvs,r.uvIndex(e),t)},r.getNormalVector=function(e){return n.getVector(r.normals,r.normalIndex(e),r.normalDimensions)},r.setNormalVector=function(e,t){return n.setVector(r.normals,r.normalIndex(e),t)},r.getTangentVector=function(e){return n.getVector(r.tangents,r.tangentIndex(e),r.normalDimensions)},r.setTangentVector=function(e,t){return n.setVector(r.tangents,r.tangentIndex(e),t)},r.getBitangentVector=function(e){return n.getVector(r.bitangents,r.bitangentIndex(e),r.normalDimensions)},r.setBitangentVector=function(e,t){return n.setVector(r.bitangents,r.bitangentIndex(e),t)},r.setTriangles2D=function(e,n,a,o,i,s){return r.primitiveType=t.TRIANGLES,r.vertexDimensions=2,r.verticies=e,r.vertexCount=e.length/r.vertexDimensions,r.colorDimensions=3,r.colors=n,r.uvDimensions=2,r.uvs=a,r.normalDimensions=3,r.normals=o,r.tangents=i,r.bitangents=s,r.extractTriangles=function(e){for(let t=0;t<r.vertexCount;t+=3)e(t,t+1,t+2)},r},r.setTriangles=function(e,n,a,o,i,s){return r.primitiveType=t.TRIANGLES,r.vertexDimensions=3,r.verticies=e,r.vertexCount=e.length/r.vertexDimensions,r.colorDimensions=3,r.colors=n,r.uvDimensions=2,r.uvs=a,r.normalDimensions=3,r.normals=o,r.tangents=i,r.bitangents=s,r.extractTriangles=function(e){for(let t=0;t<r.vertexCount;t+=3)e(t,t+1,t+2)},r},r.setTriangleStrip=function(e,n,a,o,i,s){return r.primitiveType=t.TRIANGLE_STRIP,r.vertexDimensions=3,r.verticies=e,r.vertexCount=e.length/r.vertexDimensions,r.colorDimensions=3,r.colors=n,r.uvDimensions=2,r.uvs=a,r.normalDimensions=3,r.normals=o,r.tangents=i,r.bitangents=s,r.extractTriangles=function(e){const t=r.vertexCount-2;for(let n=0;n<t;n++)0==(1&n)?e(n,n+1,n+2):e(n+2,n+1,n)},r},r.setTriangleFan=function(e,n,a,o,i,s){return r.primitiveType=t.TRIANGLE_FAN,r.vertexDimensions=3,r.verticies=e,r.vertexCount=e.length/r.vertexDimensions,r.colorDimensions=3,r.colors=n,r.uvDimensions=2,r.uvs=a,r.normalDimensions=3,r.normals=o,r.tangents=i,r.bitangents=s,r.extractTriangles=function(e){const t=r.vertexCount-2;for(let n=0;n<t;n++)e(0,n+1,n+2)},r},r.setLines2D=function(e,n,a,o){return r.primitiveType=t.LINES,r.vertexDimensions=2,r.verticies=e,r.vertexCount=e.length/r.vertexDimensions,r.colorDimensions=3,r.colors=n,r.uvDimensions=2,r.uvs=a,r.normalDimensions=3,r.normals=o,r.tangents=null,r.bitangents=null,r.extractTriangles=function(){},r},r.setLines=function(e,n,a,o){return r.primitiveType=t.LINES,r.vertexDimensions=3,r.verticies=e,r.vertexCount=e.length/r.vertexDimensions,r.colorDimensions=3,r.colors=n,r.uvDimensions=2,r.uvs=a,r.normalDimensions=3,r.normals=o,r.tangents=null,r.bitangents=null,r.extractTriangles=function(){},r},r.setLineStrip=function(e,n,a,o){return r.primitiveType=t.LINE_STRIP,r.vertexDimensions=3,r.verticies=e,r.vertexCount=e.length/r.vertexDimensions,r.colorDimensions=3,r.colors=n,r.uvDimensions=2,r.uvs=a,r.normalDimensions=3,r.normals=o,r.tangents=null,r.bitangents=null,r.extractTriangles=function(){},r},r}},198:()=>{window.frag.createShader=function(e,t,n){const r=window.frag.gl;var a=r.createShader(t);if(r.shaderSource(a,n),r.compileShader(a),r.getShaderParameter(a,r.COMPILE_STATUS))return a;console.error("Failed to compile shader "+e),console.log(r.getShaderInfoLog(a)),r.deleteShader(a)},window.frag.createProgram=function(e,t,n){const r=window.frag,a=r.gl;var o=a.createProgram();if(a.attachShader(o,t),a.attachShader(o,n),a.linkProgram(o),a.getProgramParameter(o,a.LINK_STATUS))return o;console.error("Failed to link shaders into program "+e),console.log(r.gl.getProgramInfoLog(o)),a.deleteProgram(o)},window.frag.Shader=function(){const e="None",t={name:"Custom",verticies:"XYZ",x:0,y:0,z:0,colors:e,matrix:"mat4",textureCoords:e,diffuseTexture:e,emmissiveTexture:e,displacementTexture:e,normalMap:e,roughnessTexture:e,shininessTexture:e,metalinessTexture:e,normals:e,tangents:e,bitangents:e,directionalLight:e,ambientLight:e},n={__private:t,name:function(e){return t.name=e,n},verticiesXY:function(e){return t.verticies="XY",t.z=e,n},verticiesXZ:function(e){return t.verticies="XZ",t.y=e,n},verticiesYZ:function(e){return t.verticies="YZ",t.x=e,n},verticiesXYZ:function(){return t.verticies="XYZ",n},verticiesNone:function(){return t.verticies=e,n},matrix2D:function(){return t.matrix="mat3",n},matrix3D:function(){return t.matrix="mat4",n},matrixNone:function(){return t.matrix=e,n},normals:function(){return t.normals="vec3",n},colorsRGB:function(){return t.colors="vec3",n},colorsRGBA:function(){return t.colors="vec4",n},colorsNone:function(){return t.colors=e,n},diffuseTexture:function(){return t.diffuseTexture="RGB",t.colors=e,t.textureCoords===e&&(t.textureCoords="vec2"),n},emmissiveTexture:function(){return t.emmissiveTexture="RGB",t.textureCoords===e&&(t.textureCoords="vec2"),n},normalMapStandard:function(){return t.normalMap="Standard",t.textureCoords===e&&(t.textureCoords="vec2"),t.normals===e&&(t.normals="vec3"),t.tangents===e&&(t.tangents="vec3"),n},normalMapOpenGL:function(){return t.normalMap="OpenGL",t.textureCoords===e&&(t.textureCoords="vec2"),t.normals===e&&(t.normals="vec3"),t.tangents===e&&(t.tangents="vec3"),n},displacementTextureRaised:function(){return t.displacementTexture="Raised",t.textureCoords===e&&(t.textureCoords="vec2"),t.normals===e&&(t.normals="vec3"),n},displacementTextureSunken:function(){return t.displacementTexture="Sunken",t.textureCoords===e&&(t.textureCoords="vec2"),t.normals===e&&(t.normals="vec3"),n},displacementTextureSigned:function(){return t.displacementTexture="Signed",t.textureCoords===e&&(t.textureCoords="vec2"),t.normals===e&&(t.normals="vec3"),n},tangents:function(){return t.tangents="vec3",t.normals===e&&(t.normals="vec3"),n},bitangents:function(){return t.bitangents="vec3",t.normals===e&&(t.normals="vec3"),n},directionalLightWhite:function(){return n.matrix3D(),t.directionalLight="White",t.ambientLight===e&&(t.ambientLight="Balanced"),t.normals===e&&(t.normals="vec3"),n},directionalLightNone:function(){return t.directionalLight=e,n},ambientLightBalanced:function(){return t.ambientLight="Balanced",n},ambientLightNone:function(){return t.ambientLight=e,n},ambientLightFixed:function(){return t.ambientLight="Fixed",n}};return t.addAttributeDeclarations=function(n){"XYZ"===t.verticies?n.vSource+="attribute vec4 a_position;\n":t.verticies!==e&&(n.vSource+="attribute vec2 a_position;\n"),t.colors!==e&&(n.vSource+="attribute "+t.colors+" a_color;\n"),t.textureCoords!==e&&(n.vSource+="attribute "+t.textureCoords+" a_texcoord;\n"),t.normals!==e&&(n.vSource+="attribute "+t.normals+" a_normal;\n"),t.tangents!==e&&(n.vSource+="attribute "+t.tangents+" a_tangent;\n"),t.bitangents!==e&&(n.vSource+="attribute "+t.bitangents+" a_bitangent;\n")},t.addUniformDeclarations=function(n){t.matrix!==e&&(t.directionalLight!==e&&(n.vSource+="uniform "+t.matrix+" u_modelMatrix;\n"),n.vSource+="uniform "+t.matrix+" u_clipMatrix;\n"),t.directionalLight!==e&&(n.vSource+="uniform vec3 u_lightDirection;\n"),t.displacementTexture!==e&&(n.vSource+="uniform float u_displacementScale;\n"),t.displacementTexture===e&&t.roughnessTexture===e&&t.shininessTexture==e||(n.vSource+="uniform sampler2D u_surface;\n"),t.normalMap!==e&&(n.fSource+="uniform sampler2D u_normalMap;\n"),t.textureCoords!==e&&(t.diffuseTexture!==e&&(n.fSource+="uniform sampler2D u_diffuse;\n"),t.emmissiveTexture!==e&&(n.fSource+="uniform sampler2D u_emmissive;\n")),t.ambientLight!==e&&(n.fSource+="uniform float u_ambientLight;\n")},t.addVaryingDeclarations=function(n){const r=function(e,t){const r="varying "+e+" "+t+";\n";n.vSource+=r,n.fSource+=r};t.textureCoords!==e&&r(t.textureCoords,"v_texcoord"),t.colors!==e&&r(t.colors,"v_color"),t.directionalLight!==e&&(r("vec3","v_lightDirection"),t.normalMap===e&&r(t.normals,"v_normal"))},t.addLogic=function(n){"XYZ"===t.verticies?n.vSource+="  vec4 position = a_position;\n":t.verticies!==e&&(n.vSource+="  vec2 position = a_position;\n"),t.displacementTexture===e&&t.roughnessTexture===e&&t.shininessTexture==e||(n.vSource+="  vec4 surface = texture2D(u_surface, a_texcoord);\n"),t.displacementTexture!==e&&"XYZ"===t.verticies&&"vec3"===t.normals&&("Sunken"===t.displacementTexture?n.vSource+="  float displacement = -surface.r;\n":"Signed"===t.displacementTexture?n.vSource+="  float displacement = surface.r * 2.0 - 1.0;\n":"Raised"===t.displacementTexture&&(n.vSource+="  float displacement = surface.r;\n"),n.vSource+="  position = vec4(position.xyz + (a_normal * displacement * u_displacementScale), position.w);\n"),"XYZ"===t.verticies?n.vSource+="  position = u_clipMatrix * position;\n":t.verticies!==e&&(n.vSource+="  position = (u_clipMatrix * vec3(position, 1)).xy;\n"),"XYZ"===t.verticies?n.vSource+="  gl_Position = position;\n":"XY"===t.verticies?n.vSource+="  gl_Position = vec4(position, "+t.z+", 1);\n":"XZ"===t.verticies?n.vSource+="  gl_Position = vec4(position.x, "+t.y+", position.y, 1);\n":"YZ"===t.verticies&&(n.vSource+="  gl_Position = vec4("+t.x+", position, 1);\n"),t.textureCoords!==e&&(n.vSource+="  v_texcoord = a_texcoord;\n"),t.directionalLight!==e?(t.normalMap!==e?(n.vSource+="  vec3 T = normalize(vec3(u_modelMatrix * vec4(a_tangent, 0.0)));\n",t.bitangents!==e?n.vSource+="  vec3 B = normalize(vec3(u_modelMatrix * vec4(a_bitangent, 0.0)));\n":n.vSource+="  vec3 B = normalize(vec3(u_modelMatrix * vec4(cross(a_normal, a_tangent), 0.0)));\n",n.vSource+="  vec3 N = normalize(vec3(u_modelMatrix * vec4(a_normal, 0.0)));\n",n.vSource+="  mat3 TBN = transpose(mat3(T, B, N));\n",n.vSource+="  v_lightDirection = TBN * u_lightDirection;\n",n.fSource+="  vec3 normal = texture2D(u_normalMap, v_texcoord).rgb * 2.0 - 1.0;\n"):(n.vSource+="  v_normal = (u_modelMatrix * vec4(a_normal, 0)).xyz;\n",n.vSource+="  v_lightDirection = u_lightDirection;\n",n.fSource+="  vec3 normal = normalize(v_normal);\n"),n.fSource+="  vec3 lightDirection = v_lightDirection;\n",n.fSource+="  float light = max(dot(normal, lightDirection), 0.0);\n",t.ambientLight!==e&&(n.fSource+="  light += u_ambientLight;\n")):t.ambientLight!==e&&(n.fSource+="  float light = u_ambientLight;\n"),t.colors===e?n.fSource+="  gl_FragColor = vec4(0, 0, 0, 1.0);\n":"vec4"===t.colors?(n.vSource+="  v_color = a_color;\n",n.fSource+="  gl_FragColor = v_color;\n"):(n.vSource+="  v_color = a_color;\n",n.fSource+="  gl_FragColor = vec4(v_color, 1.0);\n"),"vec2"===t.textureCoords&&"RGB"===t.diffuseTexture&&(n.fSource+="  gl_FragColor += texture2D(u_diffuse, v_texcoord);\n"),t.ambientLight===e&&t.directionalLight===e||(n.fSource+="  gl_FragColor.rgb *= light;\n"),"vec2"===t.textureCoords&&"RGB"===t.emmissiveTexture&&(n.fSource+="  gl_FragColor.rgb += texture2D(u_emmissive, v_texcoord).rgb;\n")},n.compile=function(){const n={name:t.name,vSource:"",fSource:"precision mediump float;\n",attributes:{},uniforms:{},is3d:"mat4"===t.matrix};t.addAttributeDeclarations(n),t.addUniformDeclarations(n),t.addVaryingDeclarations(n),t.directionalLight!==e&&(n.vSource+="highp mat3 transpose(in highp mat3 inMatrix) {\n",n.vSource+="    highp vec3 i0 = inMatrix[0];\n",n.vSource+="    highp vec3 i1 = inMatrix[1];\n",n.vSource+="    highp vec3 i2 = inMatrix[2];\n",n.vSource+="    highp mat3 outMatrix = mat3(\n",n.vSource+="        vec3(i0.x, i1.x, i2.x),\n",n.vSource+="        vec3(i0.y, i1.y, i2.y),\n",n.vSource+="        vec3(i0.z, i1.z, i2.z)\n",n.vSource+="    );\n",n.vSource+="    return outMatrix;\n",n.vSource+="}\n"),n.vSource+="void main() {\n",n.fSource+="void main() {\n",t.addLogic(n),n.vSource+="}\n",n.fSource+="}\n",frag.debugShaderBuilder&&(console.log("\n// "+n.name+" vertext shader\n"+n.vSource),console.log("\n// "+n.name+" fragment shader\n"+n.fSource));const r=frag.createShader(n.name,frag.gl.VERTEX_SHADER,n.vSource),a=frag.createShader(n.name,frag.gl.FRAGMENT_SHADER,n.fSource);if(n.program=frag.createProgram(n.name,r,a),!n.program)return null;const o=[],i=[];if(t.verticies!==e&&(n.attributes.position=frag.gl.getAttribLocation(n.program,"a_position")),t.colors!==e&&(n.attributes.color=frag.gl.getAttribLocation(n.program,"a_color")),t.textureCoords!==e&&(n.attributes.texture=frag.gl.getAttribLocation(n.program,"a_texcoord")),t.normals!==e&&(n.attributes.normal=frag.gl.getAttribLocation(n.program,"a_normal")),t.tangents!==e&&(n.attributes.tangent=frag.gl.getAttribLocation(n.program,"a_tangent")),t.bitangents!==e&&(n.attributes.bitangent=frag.gl.getAttribLocation(n.program,"a_bitangent")),t.matrix!==e&&(t.directionalLight!==e&&(n.uniforms.modelMatrix=frag.gl.getUniformLocation(n.program,"u_modelMatrix")),n.uniforms.clipMatrix=frag.gl.getUniformLocation(n.program,"u_clipMatrix")),t.diffuseTexture!==e&&(n.uniforms.diffuse=frag.gl.getUniformLocation(n.program,"u_diffuse")),t.emmissiveTexture!==e&&(n.uniforms.emmissive=frag.gl.getUniformLocation(n.program,"u_emmissive")),t.displacementTexture===e&&t.roughnessTexture===e&&t.shininessTexture==e||(n.uniforms.surface=frag.gl.getUniformLocation(n.program,"u_surface")),t.displacementTexture!==e&&(n.uniforms.displacementScale=frag.gl.getUniformLocation(n.program,"u_displacementScale"),o.push((function(e){e.uniform1f(n.uniforms.displacementScale,n._displacementScale)})),n._displacementScale=.2,n.displacementScale=function(e){return n._displacementScale=e,n}),t.normalMap!==e&&(n.uniforms.normalMap=frag.gl.getUniformLocation(n.program,"u_normalMap")),t.ambientLight!==e&&(n.uniforms.ambientLight=frag.gl.getUniformLocation(n.program,"u_ambientLight"),o.push((function(e){e.uniform1f(n.uniforms.ambientLight,n._ambientLight)})),n._ambientLight=.5),t.directionalLight!==e){n.uniforms.lightDirection=frag.gl.getUniformLocation(n.program,"u_lightDirection"),o.push((function(e){e.uniform3fv(n.uniforms.lightDirection,n._lightDirection)}));const e="Balanced"===t.ambientLight;n.lightDirection=function(t){const r=window.frag.Vector.length(t);return r>1?(n._lightDirection=[-t[0]/r,-t[1]/r,-t[2]/r],e&&(n._ambientLight=0)):(n._lightDirection=[-t[0],-t[1],-t[2]],e&&(n._ambientLight=1-r)),n},n.lightDirection([-.25,-.5,.4])}return n.bind=function(e){e.useProgram(n.program),o.forEach((t=>t(e)))},n.unbind=function(e){i.forEach((t=>t(e)))},n},n}},743:()=>{window.frag.uiShader=window.frag.Shader().name("UI").verticiesXY(-1).matrix2D().diffuseTexture().compile()},492:()=>{window.frag.BasicCube=function(e){const t=1/3,n=2/3,r=[1,1,-1,-1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1],a=[0,1,0,0,0,n,0,t,1,1,1,0,1,t,1,n];return function(t){const n=[],o=[],i=e.color?[]:void 0;for(var s=0;s<t.length;s++){const c=t[s];n.push(r[3*c+0]),n.push(r[3*c+1]),n.push(r[3*c+2]),e.color&&e.color.array.forEach((e=>{i.push(e)})),o.push(a[2*c+0]),o.push(a[2*c+1])}return window.frag.MeshData().addTriangleStrip(n,i,o,n)}([3,2,6,7,4,2,0,3,1,6,5,4,1,0])}},914:()=>{window.frag.Cube=function(e,t){void 0===(t=t||{}).drawFront&&(t.drawFront=!0),void 0===t.drawBack&&(t.drawBack=!0),void 0===t.drawTop&&(t.drawTop=!0),void 0===t.drawBottom&&(t.drawBottom=!0),void 0===t.drawLeft&&(t.drawLeft=!0),void 0===t.drawRight&&(t.drawRight=!0);let n=1/4,r=.5,a=1/3,o=2/3;const i=[[-1,-1,-1],[1,-1,-1],[1,1,-1],[-1,1,-1],[1,-1,1],[-1,-1,1],[-1,1,1],[1,1,1]],s=[],c=[],u=t.color?[]:void 0,l=function(e){s.push(e[0]),s.push(e[1]),s.push(e[2]),t.color&&t.color.forEach((e=>{u.push(e)}))},f=function(e,t){c.push(e),c.push(t)},m=function(e,t,n,r){l(e),l(t),l(n),l(r),l(n),l(t)},g=function(e,t,n,r){f(n,t),f(n,r),f(e,t),f(e,r),f(e,t),f(n,r)},d=function(t,n,r,a,o,s,c){for(var u=0;u<e;u++){const l=u/e,f=(u+1)/e,d=(c-o)*l+o,h=(c-o)*f+o;for(hFacet=0;hFacet<e;hFacet++){const o=hFacet/e,c=(hFacet+1)/e,u=window.frag.Vector,p=u.sub(i[r],i[n]),v=u.sub(i[t],i[n]),x=u.add(u.add(i[n],u.mult(v,o)),u.mult(p,l)),T=u.add(u.add(i[n],u.mult(v,c)),u.mult(p,l)),w=u.add(u.add(i[n],u.mult(v,o)),u.mult(p,f)),b=u.add(u.add(i[n],u.mult(v,c)),u.mult(p,f));m(T,b,x,w),g((s-a)*o+a,d,(s-a)*c+a,h)}}};return t.duplicateTexture?(t.drawFront&&d(1,0,3,1,1,0,0),t.drawBottom&&d(4,5,0,1,1,0,0),t.drawLeft&&d(0,5,6,1,1,0,0),t.drawRight&&d(4,1,2,1,1,0,0),t.drawBack&&d(5,4,7,1,1,0,0),t.drawTop&&d(6,7,2,1,1,0,0)):(t.drawFront&&d(1,0,3,n,o,0,a),t.drawBottom&&d(4,5,0,r,o,n,a),t.drawLeft&&d(0,5,6,r,o,n,1),t.drawRight&&d(4,1,2,n,a,r,0),t.drawBack&&d(5,4,7,r,a,.75,o),t.drawTop&&d(6,7,2,.75,a,1,o)),window.frag.MeshData().addTriangles(s,u,c)}},499:()=>{window.frag.Cylinder=function(e,t){e=e||32;const n=[0,0,-1],r=[.5,.5],a=[0,0,-1],o=t.color?Array.from(t.color):void 0,i=[0,0,1],s=[.5,.5],c=[0,0,1],u=t.color?Array.from(t.color):void 0,l=[],f=t.color?[]:void 0,m=[],g=[],d=2*Math.PI/e;for(var h=0;h<=e;h++){const e=-h*d,i=Math.sin(e),s=Math.cos(e);n.push(i),n.push(s),n.push(-1),t.color&&t.color.forEach((e=>o.push(e))),r.push(.5*(i+1)),r.push(.5*(s+1)),a.push(i),a.push(s),a.push(-1),l.push(i),l.push(s),l.push(-1),l.push(i),l.push(s),l.push(1),t.color&&(t.color.forEach((e=>f.push(e))),t.color.forEach((e=>f.push(e)))),m.push(.5*(i+1)),m.push(.5*(s+1)),m.push(.5*(i+1)),m.push(.5*(s+1)),g.push(i),g.push(s),g.push(0),g.push(i),g.push(s),g.push(0)}for(h=0;h<=e;h++){const e=h*d,n=Math.sin(e),r=Math.cos(e);i.push(n),i.push(r),i.push(1),t.color&&t.color.forEach((e=>u.push(e))),s.push(.5*(n+1)),s.push(.5*(r+1)),c.push(n),c.push(r),c.push(1)}return l.push(0),l.push(1),l.push(1),t.color&&t.color.forEach((e=>f.push(e))),m.push(.5),m.push(1),g.push(0),g.push(1),g.push(0),window.frag.MeshData().addTriangleFan(n,o,r,a).addTriangleFan(i,u,s,c).addTriangleStrip(l,f,m,g)}},22:()=>{window.frag.Disc=function(e,t){e=e||32;const n=[0,0,0],r=[.5,.5],a=[0,0,-1],o=2*Math.PI/e;for(var i=0;i<=e;i++){const e=-i*o,t=Math.sin(e),s=Math.cos(e);n.push(t),n.push(s),n.push(0),a.push(0),a.push(0),a.push(-1),r.push(.5*(t+1)),r.push(.5*(s+1))}return window.frag.MeshData().addTriangleFan(n,r,a)}},950:()=>{window.frag.Plane=function(e,t){if(t=t||{},1===(e=e||1)){const e=t.color||[0,0,0],n=new Float32Array([1,-1,0,1,1,0,-1,-1,0,-1,1,0,e[0],e[1],e[2],e[0],e[1],e[2],e[0],e[1],e[2],e[0],e[1],e[2],1,0,1,1,0,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0]);return window.frag.MeshData().fromBuffer(n.buffer,3,4,window.frag.gl.TRIANGLE_STRIP,0*Float32Array.BYTES_PER_ELEMENT,12*Float32Array.BYTES_PER_ELEMENT,24*Float32Array.BYTES_PER_ELEMENT,32*Float32Array.BYTES_PER_ELEMENT,44*Float32Array.BYTES_PER_ELEMENT,56*Float32Array.BYTES_PER_ELEMENT)}const n=[],r=[],a=[],o=t.color?[]:void 0,i=function(e,i){n.push(e),n.push(i),n.push(0),t.color&&t.color.forEach((e=>o.push(e))),r.push(.5*(e+1)),r.push(.5*(i+1)),a.push(0),a.push(0),a.push(-1)};for(var s=0;s<e;s++){const t=2*(e-s-1)/e-1,n=2*(e-s)/e-1;if(0==(1&s)){i(1,t);for(var c=0;c<e;c++){const r=2*(e-c-1)/e-1;i(2*(e-c)/e-1,n),i(r,t)}i(-1,n)}else{for(i(-1,n),c=0;c<e;c++){const r=2*(c+1)/e-1;i(2*c/e-1,t),i(r,n)}i(1,t)}}return window.frag.MeshData().addTriangleStrip(n,o,r,a)}},306:()=>{window.frag.SeparatedCube=function(e,t){const n=window.frag.MeshData(),r=1/4,a=.5,o=1/3,i=2/3,s=[-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,1,-1,1,-1,-1,1,-1,1,1,1,1,1],c=function(e,r,a,o){for(var i=0;i<1;i++){const i=[a[0],r[1],a[0],a[1],r[0],r[1],r[0],a[1]],u=[],l=[],f=t.color?[]:void 0;for(hFacet=0;hFacet<1;hFacet++)for(var c=0;c<4;c++)u.push(s[3*e[c]+0]),u.push(s[3*e[c]+1]),u.push(s[3*e[c]+2]),t.color&&t.color.forEach((e=>f.push(e))),l.push(o[0]),l.push(o[1]),l.push(o[2]);n.addTriangleStrip(u,f,i,u)}};return c([1,2,0,3],[r,i],[0,o],[0,0,-1]),c([4,1,5,0],[a,i],[r,o],[0,-1,0]),c([0,3,5,6],[a,i],[r,1],[-1,0,0]),c([4,7,1,2],[r,o],[a,0],[1,0,0]),c([5,6,4,7],[a,o],[.75,i],[0,0,1]),c([6,3,7,2],[.75,o],[1,i],[0,1,0]),n}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n(601),n(197),n(996),n(904),n(607),n(346),n(670),n(437),n(198),n(743),n(394),n(655),n(288),n(175),n(3),n(816),n(266),n(390),n(312),n(270),n(14),n(906),n(627),n(889),n(600),n(23),n(363),n(890),n(950),n(22),n(499),n(492),n(914),n(306),n(583),n(96)})();
//# sourceMappingURL=frag.min.js.map